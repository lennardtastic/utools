<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
   <button id="button">Refresh Widgets Multi</button>
  <h1> Widget 1</h1>
<div ub-in-page="5ddbfb191a8e9e07a9327f18"></div>
    <h1> Widget 2</h1>
<div ub-in-page="5ddbfb191a8e9e07a9327f18"></div>
 
<!-- begin usabilla embed code -->
<script>/*{literal}<![CDATA[*/window.usabilla||function(){var a=window,d=a.document,c={},f=d.createElement("div"),h=!1,a=a.usabilla=function(){(c.a=c.a||[]).push(arguments)};a._=c;c.ids={};f.style.display="none";(function(){if(!d.body)return setTimeout(arguments.callee,100);d.body.insertBefore(f,d.body.firstChild).id="usabilla";h=!0})();a.load=function(a,g,k){if(!c.ids[g]){var e=c.ids={};e.url="//"+a+"/"+g+".js?s1";e.config=k;setTimeout(function(){if(!h)return setTimeout(arguments.callee,100);var b=d.createElement("iframe"),a;b.id="usabilla-"+g;/MSIE[ ]+6/.test(navigator.userAgent)&&(b.src="javascript:false");f.appendChild(b);try{b.contentWindow.document.open()}catch(c){e.domain=d.domain,a="javascript:var d=document.open();d.domain='"+e.domain+"';",b.src=a+"void(0);"}try{var l=b.contentWindow.document;l.write(["<!DOCTYPE html><html><head></head><body onload=\"var d = document;d.getElementsByTagName('head')[0].appendChild(d.createElement('script')).src='",e.url,"'\"></body></html>"].join(""));l.close()}catch(m){b.src=a+'d.write("'+loaderHtml().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}b.contentWindow.config=k;b.contentWindow.SCRIPT_ID=g},0)}}}();
window.usabilla.load("w.usabilla.com", "3c677086ac75");
/*]]>{/literal}*/</script>
<!-- end usabilla embed code -->
  <script>
    /**
         * Refreshes the In-Page widget on the page
         *
         * Browsersupport: IE9+, Chrome, Firefox 4+, Safari.
         * More info on http://caniuse.com/#feat=queryselector
         */
        function usblInPageRefreshWidgetMulti(){

          // Get the list of In-Page widgets
          var inpageWidgetList = document.querySelectorAll('div[ub-in-page]');
          // Loop through the list of in-page widgets
          for (var i = 0; i < inpageWidgetList.length; i++) {
            // Clear the widget to ensure a proper refresh
            var inpageWidgetNode = inpageWidgetList[i];
            inpageWidgetNode.innerHTML = "";
          }


          // Get the list of scripts while assuming it's one
          var inpageScriptList = document.querySelectorAll('*[id^="usabilla-"]');
          var inpageScriptNode = inpageScriptList[0];
          var inpageScriptNodeID = inpageScriptNode.getAttribute('id');
          var inpageScriptID = inpageScriptNodeID.slice(9);

          // Reload the widgets by calling the script again
          window.usabilla.load("w.usabilla.com", inpageScriptID);
        }
  $(document).ready(function () {
    $("#button").click(function(event) {
        usblInPageRefreshWidgetMulti();
    });
});
  </script>
</body>
</html>
